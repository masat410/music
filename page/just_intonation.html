<!DOCTYPE html>
<!--suppress ALL -->
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>純正律とは</title>
    <link rel="stylesheet" href="../style.css">
    <link rel="stylesheet" href="pagestyle.css">
    <link rel="icon" href="../assets/image/favicon.png" type="image/x-icon">
</head>
<body>
<header>
    <h1>純正律とは</h1>
</header>
<main>
    <div class="section1">
        <h2>(1)平均率と純正律</h2>
        <p>
            簡単に言うと、平均率は全ての音の間隔が等しく100セントで、
            純正律は少しずれています。
            なぜずれているのかは後で説明します。
        </p>
        <h3>音階の周波数</h3>
        <span style="color: red">数字が書いてあるマスをタップすると実際にその音が鳴ります</span><br>
        <span>純正律と平均率でわずかに違うのがわかりますか?</span>

        <table >
            <thead>
            <tr>
                <th>音階</th>
                <th>純正律の周波数 (Hz)</th>
                <th>平均律の周波数 (Hz)</th>
            </tr>
            </thead>
            <tbody>
            <tr>
                <td>C</td>
                <td class="clickable" onclick="playSound(264.83)">264.83</td>
                <td class="clickable" onclick="playSound(261.63)">261.63</td>
            </tr>
            <tr>
                <td>C#</td>
                <td class="clickable" onclick="playSound(281.43)">281.43</td>
                <td class="clickable" onclick="playSound(277.18)">277.18</td>
            </tr>
            <tr>
                <td>D</td>
                <td class="clickable" onclick="playSound(295.99)">295.99</td>
                <td class="clickable" onclick="playSound(293.66)">293.66</td>
            </tr>
            <tr>
                <td>D#</td>
                <td class="clickable" onclick="playSound(312.31)">312.31</td>
                <td class="clickable" onclick="playSound(311.13)">311.13</td>
            </tr>
            <tr>
                <td>E</td>
                <td class="clickable" onclick="playSound(330.24)">330.24</td>
                <td class="clickable" onclick="playSound(329.63)">329.63</td>
            </tr>
            <tr>
                <td>F</td>
                <td class="clickable" onclick="playSound(351.11)">351.11</td>
                <td class="clickable" onclick="playSound(349.23)">349.23</td>
            </tr>
            <tr>
                <td>F#</td>
                <td class="clickable" onclick="playSound(370.72)">370.72</td>
                <td class="clickable" onclick="playSound(369.99)">369.99</td>
            </tr>
            <tr>
                <td>G</td>
                <td class="clickable" onclick="playSound(393.00)">393.00</td>
                <td class="clickable" onclick="playSound(391.99)">391.99</td>
            </tr>
            <tr>
                <td>G#</td>
                <td class="clickable" onclick="playSound(418.50)">418.50</td>
                <td class="clickable" onclick="playSound(415.30)">415.30</td>
            </tr>
            <tr>
                <td>A</td>
                <td class="clickable" onclick="playSound(442.00)">442.00</td>
                <td class="clickable" onclick="playSound(442.00)">442.00</td>
            </tr>
            <tr>
                <td>A#</td>
                <td class="clickable" onclick="playSound(469.62)">469.62</td>
                <td class="clickable" onclick="playSound(466.16)">466.16</td>
            </tr>
            <tr>
                <td>B</td>
                <td class="clickable" onclick="playSound(496.53)">496.53</td>
                <td class="clickable" onclick="playSound(493.88)">493.88</td>
            </tr>
            <tr>
                <td>C</td>
                <td class="clickable" onclick="playSound(529.66)">529.66</td>
                <td class="clickable" onclick="playSound(523.25)">523.25</td>
            </tr>
            </tbody>
        </table>



    </div>
    <div class="section2">
        <h2>(2)純正律について</h2>
        <p>
            平均率の代表ともいえるのがピアノです。
            和音の関係など、ピアノでちょっと音を下げたい時ってどうしますか?
            調律師でなきゃ無理ですよね。でも、吹奏楽だと音程をちょっと変えたりすることができ、
            理論上ピアノよりもいい響きを出すことができる。

        </p>
        <p>
            純正律はある音を基準にして周波数の比がいい感じの整数比になるようにした音律です。
            それに対し平均率はどこでも同じような響きになる音律。
            例えば、B♭の純正律で調律されたピアノがあったとして、そのピアノでB♭以外の調の曲を
            弾こうと思ったらまた別の調律されたピアノを用意しなければいけない。
        </p>

        <br><br><br>
        <h2>テスト</h2>
        <div id="quiz-container">
            <div class="question" id="question"></div>
            <div class="options">
                <button class = "answerButton" onclick="checkAnswer(0)">Option 1</button>
                <button class = "answerButton" onclick="checkAnswer(1)">Option 2</button>
                <button class = "answerButton" onclick="checkAnswer(2)">Option 3</button>
                <button class = "answerButton" onclick="checkAnswer(3)">Option 4</button>
            </div>
        </div>
        <div id="result"></div>
    </div>
    <a href="../index.html" class="btn btn-flat"><span>もどる</span></a>
    <script>
        function playSound(frequency, secondFrequency = null) {
            const context = new (window.AudioContext || window.webkitAudioContext)();
            const oscillator1 = context.createOscillator();
            oscillator1.type = 'sine';
            oscillator1.frequency.setValueAtTime(frequency, context.currentTime);

            if (secondFrequency) {
                const oscillator2 = context.createOscillator();
                oscillator2.type = 'sine';
                oscillator2.frequency.setValueAtTime(secondFrequency, context.currentTime);
                oscillator2.connect(context.destination);
                oscillator2.start();
                oscillator2.stop(context.currentTime + 1); // 1秒間音を鳴らす
            }

            oscillator1.connect(context.destination);
            oscillator1.start();
            oscillator1.stop(context.currentTime + 1); // 1秒間音を鳴らす
        }
    </script>
    <script>
        const quiz = [
            {
                question: "平均率といえば?",
                options: ["ヴァイオリン", "ピアノ", "クラリネット", "ペダルハープ"],
                answer: 1
            },
            {
                question: "吹奏楽では主にどの音律が使われていますか?",
                options: ["ヴェルクマイスター音律", "ピタゴラス音律", "自然調律", "純正律"],
                answer: 3
            }
        ];

        let currentQuestion = 0;

        function loadQuestion() {
            const q = quiz[currentQuestion];
            document.getElementById('question').textContent = q.question;
            const buttons = document.querySelectorAll('.options button');
            buttons.forEach((button, index) => {
                button.textContent = q.options[index];
            });
        }

        function checkAnswer(selectedOption) {
            const q = quiz[currentQuestion];
            if (selectedOption === q.answer) {
                document.getElementById('result').textContent = "正解！";
            } else {
                document.getElementById('result').textContent = "不正解...";
            }
            currentQuestion++;
            if (currentQuestion < quiz.length) {
                loadQuestion();
            } else {
                document.getElementById('quiz-container').style.display = 'none';
                document.getElementById('result').textContent += " 終了！";
            }
        }

        window.onload = loadQuestion;
    </script>
</main>
</body>
</html>